(this.webpackJsonpcicproms=this.webpackJsonpcicproms||[]).push([[0],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},109:function(e,t,n){"use strict";var a=n(36),s=n(37),r=n(42),i=n(38),l=n(16),o=n(43),c=n(0),u=n(41),d=n(22),m=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"instruction"},this.props.instructions)}}]),t}(c.Component),p=n(110),h=n(17),f=n(58),g=n(79),v=(n(176),n(57)),E=n(197),y=n(198),b=n(199),w=n(200),x=n(201),O=n(24),C=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value,!0)},n.handleDateInputChange=function(e){var t=n.props.questions[n.props.stage].cde,a=/^\d\d\d\d-\d\d-\d\d$/.test(e.target.value);n.props.enterData(t,e.target.value,a)},n.transformSubstring=function(e,t,n){var a,s=[];switch(a="string"===typeof e?e.split(" "):e,n){case"italic":var r=!0,i=!1,l=void 0;try{for(var o,u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var d=o.value;s.push(" ",c.createElement("i",null,d))}}catch(S){i=!0,l=S}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}return s;case"underline":var m=!0,p=!1,h=void 0;try{for(var f,g=a[Symbol.iterator]();!(m=(f=g.next()).done);m=!0){var v=f.value;t.includes(v)?s.push(" ",c.createElement("u",null,v)):s.push(" ",v)}}catch(S){p=!0,h=S}finally{try{m||null==g.return||g.return()}finally{if(p)throw h}}return s;case"bullet":var E=[],y=[],b=!1,w=!0,x=!0,O=!1,C=void 0;try{for(var k,_=a[Symbol.iterator]();!(x=(k=_.next()).done);x=!0){var j=k.value,q=j+"";"."===q.slice(-1)?(y.push(q),!0===b?s.push(c.createElement("div",null,y)):s.push(c.createElement("li",null,y)),y=[],b=!1,w=!0):(!0===w&&"0"===q&&(b=!0,w=!1),y.push(j)," "!==q&&""!==q&&(w=!1))}}catch(S){O=!0,C=S}finally{try{x||null==_.return||_.return()}finally{if(O)throw C}}return E.push(c.createElement("ul",null,s)),E}},n.handleInputKeyDown=function(e){"Enter"===e.key&&e.preventDefault()},n.onSliderChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e,!0)},n.getMarks=function(e){for(var t=e.spec.params.min,n=e.spec.params.max,a=Object(h.a)({},t,{style:{color:"red",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:c.createElement("strong",null,t," - ",e.spec.widget_spec.min_label)}),s={},r=n-t>10?(n-t)/10:1,i=t+r;i<n;i+=r)s[i]=i+"";var l=Object(h.a)({},n,{style:{color:"green",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:c.createElement("strong",null,n," - ",e.spec.widget_spec.max_label)});return Object.assign({},a,s,l)},n.getSliderHandle=function(){return function(e){var t=e.value,n=e.dragging,a=e.index,s=Object(p.a)(e,["value","dragging","index"]);return c.createElement(v.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",key:a},c.createElement(g.a,Object.assign({value:t},s)))}},n.handleIntegerChange=function(e){if(/^([-]?[0-9]+)?$/.test(e.target.value)&&!/^-$/.test(e.target.value)){e.target.classList.remove("is-invalid");var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value,!0)}else{e.target.classList.add("is-invalid");var a=n.props.questions[n.props.stage].cde;n.props.enterData(a,e.target.value,!1)}},n.handleFloatChange=function(e){if(/^([-]?[0-9]+(\.[0-9]+)?)?$/.test(e.target.value)&&!/^-$/.test(e.target.value)){e.target.classList.remove("is-invalid");var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value,!0)}else{e.target.classList.add("is-invalid");var a=n.props.questions[n.props.stage].cde;n.props.enterData(a,e.target.value,!1)}},n.onSliderChange=n.onSliderChange.bind(Object(l.a)(n)),n.handleConsent=n.handleConsent.bind(Object(l.a)(n)),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleMultiChange=n.handleMultiChange.bind(Object(l.a)(n)),n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.enterData(n,t,!0)}},{key:"handleMultiChange",value:function(e){var t,n=e.target.name;e.target.options,t=[],f.each(e.target.options,(function(e){e.selected&&t.push(e.value)})),this.props.enterData(n,t,!0)}},{key:"handleConsent",value:function(e){var t=e.target.checked,n=e.target.name;this.props.enterData(n,t,!0)}},{key:"renderOptions",value:function(e){var t=this;return f.map(e.spec.options,(function(n,a){return c.createElement(E.a,{check:!0},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(b.a,{check:!0},c.createElement(w.a,{type:"radio",name:t.props.questions[t.props.stage].cde,value:n.code,onChange:t.handleChange,checked:n.code===t.props.answers[e.cde]}),n.text)))}))}},{key:"renderRange",value:function(e){return c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),this.renderOptions(e))}},{key:"renderMultiselect",value:function(e){if(void 0!==this.props.answers[e.cde])var t=this.props.answers[e.cde].toString().replace("[","").replace("]","");else t="";return c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"select",name:e.cde,defaultValue:t,onChange:this.handleMultiChange,multiple:!0},f.map(e.spec.options,(function(e,t){return c.createElement("option",{key:e.code,value:e.code},e.text)}))))))}},{key:"renderInteger",value:function(e){var t="";return void 0!==this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleIntegerChange,onKeyDown:this.handleInputKeyDown,value:t}))))}},{key:"renderSlider",value:function(e){var t;"EQ_Health_Rate"===e.cde?(t=this.transformSubstring(this.props.questions[this.props.stage].instructions,["best","worst"],"underline"),t=this.transformSubstring(t,[],"bullet")):t="EQ_UsualActivities"===e.cde?this.transformSubstring(this.props.questions[this.props.stage].instructions,[],"italic"):this.props.questions[this.props.stage].instructions;var n=null;return void 0!==this.props.answers[e.cde]?n=this.props.answers[e.cde]:this.onSliderChange(n),c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,this.props.questions[this.props.stage].survey_question_instruction),c.createElement("h4",null,this.props.questions[this.props.stage].title),c.createElement("h6",null,t))),c.createElement(E.a,null,c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement("div",{className:"float-right",style:{width:"100px",height:"100px",backgroundColor:"#666",marginTop:"20vh",paddingTop:"3px",borderRadius:"8px"}},c.createElement("p",{className:"text-center",style:{color:"white",align:"center"}},c.createElement("p",null,e.spec.widget_spec.box_label," ",c.createElement("br",null)," ",c.createElement("b",null,n))))),c.createElement("div",{className:"col",style:{width:"50%",height:"50vh",margin:"0 auto",leftPadding:"100px"}},c.createElement(g.b,{vertical:!0,min:e.spec.min,max:e.spec.max,defaultValue:n,marks:this.getMarks(e),handle:this.getSliderHandle(),onChange:this.onSliderChange})))))}},{key:"renderText",value:function(e){return c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown}))))}},{key:"renderFloat",value:function(e){var t="";return void 0!==this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleFloatChange,onKeyDown:this.handleInputKeyDown,value:t}))))}},{key:"renderDate",value:function(e){var t=null;return void 0!==this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,Object.assign({type:"date"},e.spec.params,{name:e.cde,onChange:this.handleDateInputChange,onKeyDown:this.handleInputKeyDown,value:t})))))}},{key:"renderConsent",value:function(e){var t=c.createElement("div",null,"By ticking this box you:",c.createElement("ul",null,c.createElement("li",null,"Give consent for the information you provide to be used for the CIC Cancer project; and "),c.createElement("li",null,"Will receive a reminder when the next survey is due.")));return c.createElement(x.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(y.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,{check:!0},c.createElement(b.a,{check:!0},c.createElement(w.a,{type:"checkbox",name:this.props.questions[this.props.stage].cde,onChange:this.handleConsent,checked:this.props.answers[e.cde]}),t)))}},{key:"render",value:function(){var e=this.props.questions[this.props.stage];switch(e.spec.ui){case"integer-normal":return this.renderInteger(e);case"integer-slider":return this.renderSlider(e);case"float":return this.renderFloat(e);case"text":return this.renderText(e);case"date":return this.renderDate(e);case"range":return this.renderRange(e);case"multi_select":return this.renderMultiselect(e);case"consent":return this.renderConsent(e)}}}]),t}(c.Component);var k=Object(u.b)((function(e){return{questions:e.questions,stage:e.stage,answers:e.answers}}),(function(e){return{enterData:function(t,n,a){return e(O.a({cde:t,value:n,isValid:a}))}}}))(C),_=n(52),j=n(47),q=n(203),S=n(202),z=n(204),N=n(205),D=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(i.a)(t).call(this,e))).moveNext=n.moveNext.bind(Object(l.a)(n)),n.movePrevious=n.movePrevious.bind(Object(l.a)(n)),n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"atEnd",value:function(){var e=this.props.questions.length-1;return this.props.stage===e}},{key:"atBeginning",value:function(){return 0===this.props.stage}},{key:"getProgress",value:function(){var e=this.props.questions.length,t=this.props.questions[e-1].cde,n=Object.keys(this.props.answers).filter((function(e){return e!==t})).length;return e-=1,Math.floor(n/e*100)}},{key:"movePrevious",value:function(){this.atBeginning()||this.props.goPrevious()}},{key:"moveNext",value:function(){!this.atEnd()&&this.props.isValid&&this.props.goNext()}},{key:"render",value:function(){var e,t,n,a,s,r=!1,i="info";return!1===this.props.isValid&&(r=!0,i="dark"),this.atEnd()?_.isMobile?n=c.createElement("div",{className:"text-center"},c.createElement(S.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=c.createElement(y.a,{sm:{size:4,order:2,offset:1}},c.createElement(S.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=_.isMobile?!0===this.props.isValid?c.createElement("i",{onClick:this.moveNext}," ",c.createElement(j.b,{style:{fontSize:"56px"}})," "):c.createElement("i",{style:{visibility:"hidden"},onClick:this.moveNext}," ",c.createElement(j.b,{style:{fontSize:"56px"}})," "):c.createElement(y.a,{sm:{size:2},style:{display:"flex",justifyContent:"flex-end"}},c.createElement(S.a,{onClick:this.moveNext,disabled:r,size:"sm",color:i,style:{minWidth:"90px"}},"Next")),t=this.atBeginning()?_.isMobile?c.createElement("i",{onClick:this.movePrevious}," ",c.createElement(j.a,{style:{fontSize:"56px"}})," "):c.createElement(y.a,{sm:{size:2},style:{display:"flex"}},c.createElement(S.a,{onClick:this.movePrevious,color:"info",size:"sm",disabled:!0,style:{minWidth:"90px"}},"Previous")):_.isMobile?!0===this.props.isValid?c.createElement("i",{onClick:this.movePrevious}," ",c.createElement(j.a,{style:{fontSize:"56px"}})," "):c.createElement("i",{style:{visibility:"hidden"},onClick:this.movePrevious}," ",c.createElement(j.a,{style:{fontSize:"56px"}})," "):c.createElement(y.a,{sm:{size:2},style:{display:"flex"}},c.createElement(S.a,{onClick:this.movePrevious,disabled:r,size:"sm",color:i,style:{minWidth:"90px"}},"Previous")),this.atEnd()||(a=c.createElement(y.a,{sm:{size:8}},c.createElement(q.a,{color:"info",value:this.getProgress()},this.getProgress(),"%"))),this.props.questions[this.props.stage].source&&(s=c.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}}," Source:",this.props.questions[this.props.stage].source)),c.createElement("div",{className:"App",style:{height:"100%"}},c.createElement(z.a,null,c.createElement("div",{className:"mb-4"},c.createElement(N.a,null,c.createElement(y.a,null,c.createElement(m,{stage:this.props.stage}))),c.createElement(N.a,null,c.createElement(y.a,null,c.createElement(k,{title:this.props.title,stage:this.props.stage,questions:this.props.questions,isValid:this.props.isValid})))),c.createElement("div",{className:"mb-4"},c.createElement(N.a,{className:"navigationinputs"},t,a,e)),n),c.createElement("footer",{className:"footer",style:{height:"auto"}},s,c.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}},this.props.questions[this.props.stage].copyright_text)))}}]),t}(c.Component);t.a=Object(u.b)((function(e){return{stage:e.stage,title:e.title,answers:e.answers,questions:e.questions,isValid:e.isValid}}),(function(e){return Object(d.b)({goNext:O.b,goPrevious:O.c,submitAnswers:O.e},e)}))(D)},111:function(e,t,n){e.exports=n(112)},112:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"store",(function(){return h}));var a=n(0),s=n.n(a),r=n(8),i=n.n(r),l=n(109),o=(n(194),n(107)),c=n(41),u=n(22),d=n(108),m=n(24),p=(n(195),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c),h=Object(u.d)(m.d,p(Object(u.a)(d.a)));h.subscribe((function(){return e.console.log(h.getState())}));i.a.render(s.a.createElement(c.a,{store:h},s.a.createElement(l.a,null)),document.getElementById("root")),o.a()}.call(this,n(48))},194:function(e,t,n){},24:function(e,t,n){"use strict";var a,s=n(17),r=n(25),i=n(60),l=n.n(i),o=n(207),c=n(206);function u(e,t){return e.filter((function(e){return function(e,t){switch(e.tag){case"cde":return!0;case"cond":return function(e,t){if(!t.answers.hasOwnProperty(e.cde))return!1;var n=t.answers[e.cde];switch(e.op){case"=":return n===e.value;case"or":return e.value.indexOf(n)>-1;default:return!1}}(e.cond,t);default:return!1}}(e,t)}))}n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return E}));var d=Object(o.a)("PROMS_PREVIOUS"),m=Object(o.a)("PROMS_NEXT"),p=Object(o.a)("PROMS_SUBMIT"),h=Object(o.a)("PROMS_ENTER_DATA");l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.xsrfCookieName="csrftoken";var f={stage:0,answers:{},questions:u(window.proms_config.questions,{answers:{}}),title:"",isValid:!0};function g(e,t){var n=e.payload.cde,a=e.payload.value,s=(e.payload.isValid,t.answers),i=Object(r.a)({},s);return i[n]=a,i}function v(e){var t=e.questions.length,n=e.answers,a=e.questions[t-1].cde;if(!n.hasOwnProperty(a)){var s=e.answers,i=Object(r.a)({},s);return i[a]=!1,i}return n}var E=Object(c.a)((a={},Object(s.a)(a,d,(function(e,t){return Object(r.a)({},e,{stage:e.stage-1})})),Object(s.a)(a,m,(function(e,t){return Object(r.a)({},e,{stage:e.stage+1})})),Object(s.a)(a,p,(function(e,t){var n=Object(r.a)({},e,{answers:v(e)});return function(e){var t=window.proms_config.patient_token,n=window.proms_config.registry_code,a=window.proms_config.survey_name,s=window.proms_config.survey_endpoint,r={patient_token:t,registry_code:n,survey_name:a,answers:e};l.a.post(s,r).then((function(e){return window.location.replace(window.proms_config.completed_page)})).catch((function(e){return alert(e.toString())}))}(n.answers),n})),Object(s.a)(a,h,(function(e,t){var n=g(t,e);return Object(r.a)({},e,{isValid:t.payload.isValid,answers:g(t,e),questions:u(window.proms_config.questions,{answers:n})})})),a),f)}},[[111,1,2]]]);
//# sourceMappingURL=main.71aa6e0a.chunk.js.map
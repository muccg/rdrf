(this.webpackJsonpcicproms=this.webpackJsonpcicproms||[]).push([[0],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},109:function(e,t,n){"use strict";var a=n(36),r=n(37),s=n(42),i=n(38),o=n(17),c=n(43),l=n(1),u=n(41),p=n(22),h=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.createElement("div",{className:"instruction"},this.props.instructions)}}]),t}(l.Component),m=n(110),d=n(9),g=n(57),f=n(79),v=(n(176),n(56)),b=n(197),E=n(198),y=n(199),w=n(200),O=n(201),j=n(24),x=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value)},n.transformSubstring=function(e,t,n){var a,r=[];switch(a="string"===typeof e?e.split(" "):e,n){case"italic":var s=!0,i=!1,o=void 0;try{for(var c,u=a[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var p=c.value;r.push(" ",l.createElement("i",null,p))}}catch(S){i=!0,o=S}finally{try{s||null==u.return||u.return()}finally{if(i)throw o}}return r;case"underline":var h=!0,m=!1,d=void 0;try{for(var g,f=a[Symbol.iterator]();!(h=(g=f.next()).done);h=!0){var v=g.value;t.includes(v)?r.push(" ",l.createElement("u",null,v)):r.push(" ",v)}}catch(S){m=!0,d=S}finally{try{h||null==f.return||f.return()}finally{if(m)throw d}}return r;case"bullet":var b=[],E=!1,y=!0,w=!0,O=!1,j=void 0;try{for(var x,k=a[Symbol.iterator]();!(w=(x=k.next()).done);w=!0){var C=x.value,_=C+"";"."===_.slice(-1)?(b.push(_),!0===E?r.push(l.createElement("div",null,b)):r.push(l.createElement("li",null,b)),b=[],E=!1,y=!0):(!0===y&&"0"===_&&(E=!0),b.push(C)," "!==_&&(y=!1))}}catch(S){O=!0,j=S}finally{try{w||null==k.return||k.return()}finally{if(O)throw j}}return r}},n.handleInputKeyDown=function(e){"Enter"===e.key&&e.preventDefault()},n.onSliderChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e)},n.getMarks=function(e){var t,n=e.spec.min,a=e.spec.max;return t={},Object(d.a)(t,n,{style:{color:"red",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:l.createElement("strong",null,n," - The worst health",l.createElement("br",null),"you can imagine")}),Object(d.a)(t,10,"10"),Object(d.a)(t,20,"20"),Object(d.a)(t,30,"30"),Object(d.a)(t,40,"40"),Object(d.a)(t,50,"50"),Object(d.a)(t,60,"60"),Object(d.a)(t,70,"70"),Object(d.a)(t,80,"80"),Object(d.a)(t,90,"90"),Object(d.a)(t,a,{style:{color:"green",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:l.createElement("strong",null,a," - The best health",l.createElement("br",null),"you can imagine")}),t},n.getSliderHandle=function(){return function(e){var t=e.value,n=e.dragging,a=e.index,r=Object(m.a)(e,["value","dragging","index"]);return l.createElement(v.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",key:a},l.createElement(f.a,Object.assign({value:t},r)))}},n.onSliderChange=n.onSliderChange.bind(Object(o.a)(n)),n.handleConsent=n.handleConsent.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleMultiChange=n.handleMultiChange.bind(Object(o.a)(n)),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.enterData(n,t)}},{key:"handleMultiChange",value:function(e){var t,n=e.target.name;e.target.options,t=[],g.each(e.target.options,(function(e){e.selected&&t.push(e.value)})),this.props.enterData(n,t)}},{key:"handleConsent",value:function(e){var t=e.target.checked,n=e.target.name;this.props.enterData(n,t)}},{key:"renderMultiSelect",value:function(e){return l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement("h6",null,e.survey_question_instruction),l.createElement("h4",null,e.title),l.createElement("h6",null,e.instructions)),l.createElement(E.a,null,l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(w.a,{type:"select",name:e.cde,onChange:this.handleMultiChange,multiple:!0},g.map(e.spec.options,(function(e,t){return l.createElement("option",{key:e.code,value:e.code},e.text)}))))))}},{key:"renderInput",value:function(e){var t="";return this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement("h6",null,e.survey_question_instruction),l.createElement("h4",null,e.title),l.createElement("h6",null,e.instructions)),l.createElement(E.a,null,l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,value:t}))))}},{key:"render",value:function(){var e=this,t=this.props.questions[this.props.stage],n=0;t.spec&&"integer"===t.spec.tag&&(void 0!==this.props.answers[t.cde]?n=this.props.answers[t.cde]:this.onSliderChange(n));this.props.questions.length,this.props.stage;var a,r="PROMSConsent"===t.cde,s=l.createElement("div",null,"By ticking this box you:",l.createElement("ul",null,l.createElement("li",null,"Give consent for the information you provide to be used for the CIC Cancer project; and "),l.createElement("li",null,"Will receive a reminder when the next survey is due."))),i=t.spec&&"range"===t.spec.tag&&t.spec.allow_multiple;return"cond"===t.tag&&null==t.spec||"string"===t.datatype?this.renderInput(t):i?this.renderMultiSelect(t):("EQ_Health_Rate"===t.cde?(a=this.transformSubstring(this.props.questions[this.props.stage].instructions,["best","worst"],"underline"),a=this.transformSubstring(a,[],"bullet")):a="EQ_UsualActivities"===t.cde?this.transformSubstring(this.props.questions[this.props.stage].instructions,[],"italic"):this.props.questions[this.props.stage].instructions,l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement("h6",null,this.props.questions[this.props.stage].survey_question_instruction),l.createElement("h4",null,this.props.questions[this.props.stage].title),l.createElement("h6",null,a))),"integer"===t.spec.tag?l.createElement("div",{className:"row"},l.createElement("div",{className:"col"},l.createElement("div",{className:"float-right",style:{width:"100px",height:"100px",backgroundColor:"#666",marginTop:"20vh",paddingTop:"3px",borderRadius:"8px"}},l.createElement("p",{className:"text-center",style:{color:"white",align:"center"}},l.createElement("p",null,"YOUR HEALTH TODAY ",l.createElement("br",null)," ",l.createElement("b",null,n))))),l.createElement("div",{className:"col",style:{width:"50%",height:"50vh",margin:"0 auto",leftPadding:"100px"}},l.createElement(f.b,{vertical:!0,min:t.spec.min,max:t.spec.max,defaultValue:n,marks:this.getMarks(t),handle:this.getSliderHandle(),onChange:this.onSliderChange}))):r?l.createElement(E.a,{check:!0},l.createElement(O.a,{check:!0},l.createElement(w.a,{type:"checkbox",name:this.props.questions[this.props.stage].cde,onChange:this.handleConsent,checked:this.props.answers[t.cde]}),s)):g.map("range"===t.spec.tag?t.spec.options:[],(function(n,a){return l.createElement(E.a,{check:!0},l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(O.a,{check:!0},l.createElement(w.a,{type:"radio",name:e.props.questions[e.props.stage].cde,value:n.code,onChange:e.handleChange,checked:n.code===e.props.answers[t.cde]}),n.text)))}))))}}]),t}(l.Component);var k=Object(u.b)((function(e){return{questions:e.questions,stage:e.stage,answers:e.answers}}),(function(e){return{enterData:function(t,n){return e(j.a({cde:t,value:n}))}}}))(x),C=n(51),_=n(60),S=n(203),q=n(202),N=n(204),P=n(205),M=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).moveNext=n.moveNext.bind(Object(o.a)(n)),n.movePrevious=n.movePrevious.bind(Object(o.a)(n)),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"atEnd",value:function(){var e=this.props.questions.length-1;return this.props.stage===e}},{key:"atBeginning",value:function(){return 0===this.props.stage}},{key:"getProgress",value:function(){var e=this.props.questions.length,t=this.props.questions[e-1].cde,n=Object.keys(this.props.answers).filter((function(e){return e!==t})).length;return e-=1,Math.floor(n/e*100)}},{key:"movePrevious",value:function(){this.atBeginning()||this.props.goPrevious()}},{key:"moveNext",value:function(){this.atEnd()||this.props.goNext()}},{key:"render",value:function(){var e,t,n,a,r;return this.atEnd()?C.isMobile?n=l.createElement("div",{className:"text-center"},l.createElement(q.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=l.createElement(y.a,{sm:{size:4,order:2,offset:1}},l.createElement(q.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=C.isMobile?l.createElement("i",{onClick:this.moveNext}," ",l.createElement(_.b,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex",justifyContent:"flex-end"}},l.createElement(q.a,{onClick:this.moveNext,size:"sm",color:"info",style:{minWidth:"90px"}},"Next")),t=this.atBeginning()?C.isMobile?l.createElement("i",{onClick:this.movePrevious}," ",l.createElement(_.a,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex"}},l.createElement(q.a,{onClick:this.movePrevious,color:"info",size:"sm",disabled:!0,style:{minWidth:"90px"}},"Previous")):C.isMobile?l.createElement("i",{onClick:this.movePrevious}," ",l.createElement(_.a,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex"}},l.createElement(q.a,{onClick:this.movePrevious,color:"info",size:"sm",style:{minWidth:"90px"}},"Previous")),this.atEnd()||(a=l.createElement(y.a,{sm:{size:8}},l.createElement(S.a,{color:"info",value:this.getProgress()},this.getProgress(),"%"))),this.props.questions[this.props.stage].source&&(r=l.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}}," Source:",this.props.questions[this.props.stage].source)),l.createElement("div",{className:"App",style:{height:"100%"}},l.createElement(N.a,null,l.createElement("div",{className:"mb-4"},l.createElement(P.a,null,l.createElement(y.a,null,l.createElement(h,{stage:this.props.stage}))),l.createElement(P.a,null,l.createElement(y.a,null,l.createElement(k,{title:this.props.title,stage:this.props.stage,questions:this.props.questions})))),l.createElement("div",{className:"mb-4"},l.createElement(P.a,{className:"navigationinputs"},t,a,e)),n),l.createElement("footer",{className:"footer",style:{height:"auto"}},r,l.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}},this.props.questions[this.props.stage].copyright_text)))}}]),t}(l.Component);t.a=Object(u.b)((function(e){return{stage:e.stage,title:e.title,answers:e.answers,questions:e.questions}}),(function(e){return Object(p.b)({goNext:j.b,goPrevious:j.c,submitAnswers:j.e},e)}))(M)},111:function(e,t,n){e.exports=n(112)},112:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"store",(function(){return d}));var a=n(1),r=n.n(a),s=n(8),i=n.n(s),o=n(109),c=(n(194),n(107)),l=n(41),u=n(22),p=n(108),h=n(24),m=(n(195),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c),d=Object(u.d)(h.d,m(Object(u.a)(p.a)));d.subscribe((function(){return e.console.log(d.getState())}));i.a.render(r.a.createElement(l.a,{store:d},r.a.createElement(o.a,null)),document.getElementById("root")),c.a()}.call(this,n(47))},194:function(e,t,n){},24:function(e,t,n){"use strict";var a,r=n(9),s=n(25),i=n(59),o=n.n(i),c=n(207),l=n(206);function u(e,t){return e.filter((function(e){return function(e,t){switch(e.tag){case"cde":return!0;case"cond":return function(e,t){if(!t.answers.hasOwnProperty(e.cde))return!1;var n=t.answers[e.cde];switch(e.op){case"=":return n===e.value;case"or":return e.value.indexOf(n)>-1;default:return!1}}(e.cond,t);default:return!1}}(e,t)}))}n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return E}));var p=Object(c.a)("PROMS_PREVIOUS"),h=Object(c.a)("PROMS_NEXT"),m=Object(c.a)("PROMS_SUBMIT"),d=Object(c.a)("PROMS_ENTER_DATA");o.a.defaults.xsrfHeaderName="X-CSRFTOKEN",o.a.defaults.xsrfCookieName="csrftoken";var g={stage:0,answers:{},questions:u(window.proms_config.questions,{answers:{}}),title:""};function f(e,t){var n=e.payload.cde,a=e.payload.value,r=t.answers,i=Object(s.a)({},r);return i[n]=a,i}function v(e){var t=e.stage,n=e.questions[t].cde,a=e.answers,r=Object(s.a)({},a);return delete r[n],r}function b(e){var t=e.questions.length,n=e.answers,a=e.questions[t-1].cde;if(!n.hasOwnProperty(a)){var r=e.answers,i=Object(s.a)({},r);return i[a]=!1,i}return n}var E=Object(l.a)((a={},Object(r.a)(a,p,(function(e,t){return Object(s.a)({},e,{answers:v(e),stage:e.stage-1})})),Object(r.a)(a,h,(function(e,t){return Object(s.a)({},e,{stage:e.stage+1})})),Object(r.a)(a,m,(function(e,t){var n=Object(s.a)({},e,{answers:b(e)});return function(e){var t=window.proms_config.patient_token,n=window.proms_config.registry_code,a=window.proms_config.survey_name,r=window.proms_config.survey_endpoint,s={patient_token:t,registry_code:n,survey_name:a,answers:e};o.a.post(r,s).then((function(e){return window.location.replace(window.proms_config.completed_page)})).catch((function(e){return alert(e.toString())}))}(n.answers),n})),Object(r.a)(a,d,(function(e,t){var n=f(t,e);return Object(s.a)({},e,{answers:f(t,e),questions:u(window.proms_config.questions,{answers:n})})})),a),g)}},[[111,1,2]]]);
//# sourceMappingURL=main.34c867d8.chunk.js.map
(this.webpackJsonpcicproms=this.webpackJsonpcicproms||[]).push([[0],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},109:function(e,t,n){"use strict";var r=n(36),a=n(37),s=n(42),i=n(38),l=n(16),o=n(43),c=n(0),u=n(41),m=n(22),h=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"instruction"},this.props.instructions)}}]),t}(c.Component),d=n(110),p=n(17),f=n(57),g=n(79),v=(n(176),n(56)),E=n(197),b=n(198),y=n(199),w=n(200),O=n(201),x=n(24),_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value)},n.transformSubstring=function(e,t,n){var r,a=[];switch(r="string"===typeof e?e.split(" "):e,n){case"italic":var s=!0,i=!1,l=void 0;try{for(var o,u=r[Symbol.iterator]();!(s=(o=u.next()).done);s=!0){var m=o.value;a.push(" ",c.createElement("i",null,m))}}catch(S){i=!0,l=S}finally{try{s||null==u.return||u.return()}finally{if(i)throw l}}return a;case"underline":var h=!0,d=!1,p=void 0;try{for(var f,g=r[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value;t.includes(v)?a.push(" ",c.createElement("u",null,v)):a.push(" ",v)}}catch(S){d=!0,p=S}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}return a;case"bullet":var E=[],b=[],y=!1,w=!0,O=!0,x=!1,_=void 0;try{for(var k,j=r[Symbol.iterator]();!(O=(k=j.next()).done);O=!0){var C=k.value,q=C+"";"."===q.slice(-1)?(b.push(q),!0===y?a.push(c.createElement("div",null,b)):a.push(c.createElement("li",null,b)),b=[],y=!1,w=!0):(!0===w&&"0"===q&&(y=!0,w=!1),b.push(C)," "!==q&&""!==q&&(w=!1))}}catch(S){x=!0,_=S}finally{try{O||null==j.return||j.return()}finally{if(x)throw _}}return E.push(c.createElement("ul",null,a)),E}},n.handleInputKeyDown=function(e){"Enter"===e.key&&e.preventDefault()},n.onSliderChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e)},n.getMarks=function(e){for(var t=e.spec.params.min,n=e.spec.params.max,r=Object(p.a)({},t,{style:{color:"red",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:c.createElement("strong",null,t," - ",e.spec.widget_spec.min_label)}),a={},s=n-t>10?(n-t)/10:1,i=t+s;i<n;i+=s)a[i]=i+"";var l=Object(p.a)({},n,{style:{color:"green",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:c.createElement("strong",null,n," - ",e.spec.widget_spec.max_label)});return Object.assign({},r,a,l)},n.getSliderHandle=function(){return function(e){var t=e.value,n=e.dragging,r=e.index,a=Object(d.a)(e,["value","dragging","index"]);return c.createElement(v.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",key:r},c.createElement(g.a,Object.assign({value:t},a)))}},n.onSliderChange=n.onSliderChange.bind(Object(l.a)(n)),n.handleConsent=n.handleConsent.bind(Object(l.a)(n)),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleMultiChange=n.handleMultiChange.bind(Object(l.a)(n)),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.enterData(n,t)}},{key:"handleMultiChange",value:function(e){var t,n=e.target.name;e.target.options,t=[],f.each(e.target.options,(function(e){e.selected&&t.push(e.value)})),this.props.enterData(n,t)}},{key:"handleConsent",value:function(e){var t=e.target.checked,n=e.target.name;this.props.enterData(n,t)}},{key:"renderOptions",value:function(e){var t=this;return f.map(e.spec.options,(function(n,r){return c.createElement(E.a,{check:!0},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(y.a,{check:!0},c.createElement(w.a,{type:"radio",name:t.props.questions[t.props.stage].cde,value:n.code,onChange:t.handleChange,checked:n.code===t.props.answers[e.cde]}),n.text)))}))}},{key:"renderRange",value:function(e){return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),this.renderOptions(e))}},{key:"renderMultiselect",value:function(e){return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"select",name:e.cde,onChange:this.handleMultiChange,multiple:!0},f.map(e.spec.options,(function(e,t){return c.createElement("option",{key:e.code,value:e.code},e.text)}))))))}},{key:"renderInteger",value:function(e){var t=null;return void 0!==this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,Object.assign({type:"number"},e.spec.params,{name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,value:t})))))}},{key:"renderSlider",value:function(e){var t;"EQ_Health_Rate"===e.cde?(t=this.transformSubstring(this.props.questions[this.props.stage].instructions,["best","worst"],"underline"),t=this.transformSubstring(t,[],"bullet")):t="EQ_UsualActivities"===e.cde?this.transformSubstring(this.props.questions[this.props.stage].instructions,[],"italic"):this.props.questions[this.props.stage].instructions;var n=null;return void 0!==this.props.answers[e.cde]?n=this.props.answers[e.cde]:this.onSliderChange(n),c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,this.props.questions[this.props.stage].survey_question_instruction),c.createElement("h4",null,this.props.questions[this.props.stage].title),c.createElement("h6",null,t))),c.createElement(E.a,null,c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement("div",{className:"float-right",style:{width:"100px",height:"100px",backgroundColor:"#666",marginTop:"20vh",paddingTop:"3px",borderRadius:"8px"}},c.createElement("p",{className:"text-center",style:{color:"white",align:"center"}},c.createElement("p",null,e.spec.widget_spec.box_label," ",c.createElement("br",null)," ",c.createElement("b",null,n))))),c.createElement("div",{className:"col",style:{width:"50%",height:"50vh",margin:"0 auto",leftPadding:"100px"}},c.createElement(g.b,{vertical:!0,min:e.spec.min,max:e.spec.max,defaultValue:n,marks:this.getMarks(e),handle:this.getSliderHandle(),onChange:this.onSliderChange})))))}},{key:"renderText",value:function(e){return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown}))))}},{key:"renderFloat",value:function(e){return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,{type:"text",pattern:"-?\\d+(\\.\\d+)?",name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown}))))}},{key:"renderDate",value:function(e){return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,null,c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement(w.a,Object.assign({type:"date"},e.spec.params,{name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown})))))}},{key:"renderConsent",value:function(e){var t=c.createElement("div",null,"By ticking this box you:",c.createElement("ul",null,c.createElement("li",null,"Give consent for the information you provide to be used for the CIC Cancer project; and "),c.createElement("li",null,"Will receive a reminder when the next survey is due.")));return c.createElement(O.a,null,c.createElement(E.a,{tag:"fieldset"},c.createElement(b.a,{sm:"12",md:{size:6,offset:3}},c.createElement("h6",null,e.survey_question_instruction),c.createElement("h4",null,e.title),c.createElement("h6",null,e.instructions))),c.createElement(E.a,{check:!0},c.createElement(y.a,{check:!0},c.createElement(w.a,{type:"checkbox",name:this.props.questions[this.props.stage].cde,onChange:this.handleConsent,checked:this.props.answers[e.cde]}),t)))}},{key:"render",value:function(){var e=this.props.questions[this.props.stage];switch(e.spec.ui){case"integer-normal":return this.renderInteger(e);case"integer-slider":return this.renderSlider(e);case"float":return this.renderFloat(e);case"text":return this.renderText(e);case"date":return this.renderDate(e);case"range":return this.renderRange(e);case"multi_select":return this.renderMultiselect(e);case"consent":return this.renderConsent(e)}}}]),t}(c.Component);var k=Object(u.b)((function(e){return{questions:e.questions,stage:e.stage,answers:e.answers}}),(function(e){return{enterData:function(t,n){return e(x.a({cde:t,value:n}))}}}))(_),j=n(51),C=n(60),q=n(203),S=n(202),z=n(204),N=n(205),P=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).moveNext=n.moveNext.bind(Object(l.a)(n)),n.movePrevious=n.movePrevious.bind(Object(l.a)(n)),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"atEnd",value:function(){var e=this.props.questions.length-1;return this.props.stage===e}},{key:"atBeginning",value:function(){return 0===this.props.stage}},{key:"getProgress",value:function(){var e=this.props.questions.length,t=this.props.questions[e-1].cde,n=Object.keys(this.props.answers).filter((function(e){return e!==t})).length;return e-=1,Math.floor(n/e*100)}},{key:"movePrevious",value:function(){this.atBeginning()||this.props.goPrevious()}},{key:"moveNext",value:function(){this.atEnd()||this.props.goNext()}},{key:"render",value:function(){var e,t,n,r,a;return this.atEnd()?j.isMobile?n=c.createElement("div",{className:"text-center"},c.createElement(S.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=c.createElement(b.a,{sm:{size:4,order:2,offset:1}},c.createElement(S.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=j.isMobile?c.createElement("i",{onClick:this.moveNext}," ",c.createElement(C.b,{style:{fontSize:"56px"}})," "):c.createElement(b.a,{sm:{size:2},style:{display:"flex",justifyContent:"flex-end"}},c.createElement(S.a,{onClick:this.moveNext,size:"sm",color:"info",style:{minWidth:"90px"}},"Next")),t=this.atBeginning()?j.isMobile?c.createElement("i",{onClick:this.movePrevious}," ",c.createElement(C.a,{style:{fontSize:"56px"}})," "):c.createElement(b.a,{sm:{size:2},style:{display:"flex"}},c.createElement(S.a,{onClick:this.movePrevious,color:"info",size:"sm",disabled:!0,style:{minWidth:"90px"}},"Previous")):j.isMobile?c.createElement("i",{onClick:this.movePrevious}," ",c.createElement(C.a,{style:{fontSize:"56px"}})," "):c.createElement(b.a,{sm:{size:2},style:{display:"flex"}},c.createElement(S.a,{onClick:this.movePrevious,color:"info",size:"sm",style:{minWidth:"90px"}},"Previous")),this.atEnd()||(r=c.createElement(b.a,{sm:{size:8}},c.createElement(q.a,{color:"info",value:this.getProgress()},this.getProgress(),"%"))),this.props.questions[this.props.stage].source&&(a=c.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}}," Source:",this.props.questions[this.props.stage].source)),c.createElement("div",{className:"App",style:{height:"100%"}},c.createElement(z.a,null,c.createElement("div",{className:"mb-4"},c.createElement(N.a,null,c.createElement(b.a,null,c.createElement(h,{stage:this.props.stage}))),c.createElement(N.a,null,c.createElement(b.a,null,c.createElement(k,{title:this.props.title,stage:this.props.stage,questions:this.props.questions})))),c.createElement("div",{className:"mb-4"},c.createElement(N.a,{className:"navigationinputs"},t,r,e)),n),c.createElement("footer",{className:"footer",style:{height:"auto"}},a,c.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}},this.props.questions[this.props.stage].copyright_text)))}}]),t}(c.Component);t.a=Object(u.b)((function(e){return{stage:e.stage,title:e.title,answers:e.answers,questions:e.questions}}),(function(e){return Object(m.b)({goNext:x.b,goPrevious:x.c,submitAnswers:x.e},e)}))(P)},111:function(e,t,n){e.exports=n(112)},112:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"store",(function(){return p}));var r=n(0),a=n.n(r),s=n(8),i=n.n(s),l=n(109),o=(n(194),n(107)),c=n(41),u=n(22),m=n(108),h=n(24),d=(n(195),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c),p=Object(u.d)(h.d,d(Object(u.a)(m.a)));p.subscribe((function(){return e.console.log(p.getState())}));i.a.render(a.a.createElement(c.a,{store:p},a.a.createElement(l.a,null)),document.getElementById("root")),o.a()}.call(this,n(47))},194:function(e,t,n){},24:function(e,t,n){"use strict";var r,a=n(17),s=n(25),i=n(59),l=n.n(i),o=n(207),c=n(206);function u(e,t){return e.filter((function(e){return function(e,t){switch(e.tag){case"cde":return!0;case"cond":return function(e,t){if(!t.answers.hasOwnProperty(e.cde))return!1;var n=t.answers[e.cde];switch(e.op){case"=":return n===e.value;case"or":return e.value.indexOf(n)>-1;default:return!1}}(e.cond,t);default:return!1}}(e,t)}))}n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return b}));var m=Object(o.a)("PROMS_PREVIOUS"),h=Object(o.a)("PROMS_NEXT"),d=Object(o.a)("PROMS_SUBMIT"),p=Object(o.a)("PROMS_ENTER_DATA");l.a.defaults.xsrfHeaderName="X-CSRFTOKEN",l.a.defaults.xsrfCookieName="csrftoken";var f={stage:0,answers:{},questions:u(window.proms_config.questions,{answers:{}}),title:""};function g(e,t){var n=e.payload.cde,r=e.payload.value,a=t.answers,i=Object(s.a)({},a);return i[n]=r,i}function v(e){var t=e.stage,n=e.questions[t].cde,r=e.answers,a=Object(s.a)({},r);return delete a[n],a}function E(e){var t=e.questions.length,n=e.answers,r=e.questions[t-1].cde;if(!n.hasOwnProperty(r)){var a=e.answers,i=Object(s.a)({},a);return i[r]=!1,i}return n}var b=Object(c.a)((r={},Object(a.a)(r,m,(function(e,t){return Object(s.a)({},e,{answers:v(e),stage:e.stage-1})})),Object(a.a)(r,h,(function(e,t){return Object(s.a)({},e,{stage:e.stage+1})})),Object(a.a)(r,d,(function(e,t){var n=Object(s.a)({},e,{answers:E(e)});return function(e){var t=window.proms_config.patient_token,n=window.proms_config.registry_code,r=window.proms_config.survey_name,a=window.proms_config.survey_endpoint,s={patient_token:t,registry_code:n,survey_name:r,answers:e};l.a.post(a,s).then((function(e){return window.location.replace(window.proms_config.completed_page)})).catch((function(e){return alert(e.toString())}))}(n.answers),n})),Object(a.a)(r,p,(function(e,t){var n=g(t,e);return Object(s.a)({},e,{answers:g(t,e),questions:u(window.proms_config.questions,{answers:n})})})),r),f)}},[[111,1,2]]]);
//# sourceMappingURL=main.998e7824.chunk.js.map
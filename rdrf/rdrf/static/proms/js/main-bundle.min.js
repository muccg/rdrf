(window.webpackJsonpcicproms=window.webpackJsonpcicproms||[]).push([[0],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},115:function(e,t,n){"use strict";var r=n(37),s=n(38),a=n(44),i=n(39),o=n(20),c=n(43),l=n(1),u=n(42),p=n(25),m=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.createElement("div",{className:"instruction"},this.props.instructions)}}]),t}(l.Component),h=n(116),d=n(13),g=n(60),f=n(83),v=(n(182),n(114)),b=n(203),E=n(204),y=n(205),w=n(206),O=n(207),j=n(27),x=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e.target.value)},n.transformSubstring=function(e,t,n){var r,s=[];switch(r="string"===typeof e?e.split(" "):e,n){case"underline":var a=!0,i=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;t.includes(p)?s.push(" ",l.createElement("u",null,p)):s.push(" ",p)}}catch(y){i=!0,o=y}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return s;case"bullet":var m=[],h=!0,d=!1,g=void 0;try{for(var f,v=r[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var b=f.value,E=b+"";"."===E.slice(-1)?(m.push(E),s.push(l.createElement("li",null,m)),m=[]):m.push(b)}}catch(y){d=!0,g=y}finally{try{h||null==v.return||v.return()}finally{if(d)throw g}}return s}},n.handleInputKeyDown=function(e){"Enter"===e.key&&e.preventDefault()},n.onSliderChange=function(e){var t=n.props.questions[n.props.stage].cde;n.props.enterData(t,e)},n.getMarks=function(e){var t,n=e.spec.min,r=e.spec.max;return t={},Object(d.a)(t,n,{style:{color:"red",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:l.createElement("strong",null,n," - The worst health",l.createElement("br",null),"you can imagine")}),Object(d.a)(t,10,"10"),Object(d.a)(t,20,"20"),Object(d.a)(t,30,"30"),Object(d.a)(t,40,"40"),Object(d.a)(t,50,"50"),Object(d.a)(t,60,"60"),Object(d.a)(t,70,"70"),Object(d.a)(t,80,"80"),Object(d.a)(t,90,"90"),Object(d.a)(t,r,{style:{color:"green",width:"max-content",textAlign:"left",marginBottom:"-100%"},label:l.createElement("strong",null,r," - The best health",l.createElement("br",null),"you can imagine")}),t},n.getSliderHandle=function(){return function(e){var t=e.value,n=e.dragging,r=e.index,s=Object(h.a)(e,["value","dragging","index"]);return l.createElement(v.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",key:r},l.createElement(f.a,Object.assign({value:t},s)))}},n.onSliderChange=n.onSliderChange.bind(Object(o.a)(n)),n.handleConsent=n.handleConsent.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleMultiChange=n.handleMultiChange.bind(Object(o.a)(n)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.enterData(n,t)}},{key:"handleMultiChange",value:function(e){var t,n=e.target.name;e.target.options,t=[],g.each(e.target.options,(function(e){e.selected&&t.push(e.value)})),this.props.enterData(n,t)}},{key:"handleConsent",value:function(e){var t=e.target.checked,n=e.target.name;this.props.enterData(n,t)}},{key:"renderMultiSelect",value:function(e){return l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement("h6",null,e.survey_question_instruction),l.createElement("h4",null,e.title),l.createElement("h6",null,e.instructions)),l.createElement(E.a,null,l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(w.a,{type:"select",name:e.cde,onChange:this.handleMultiChange,multiple:!0},g.map(e.spec.options,(function(e,t){return l.createElement("option",{key:e.code,value:e.code},e.text)}))))))}},{key:"renderInput",value:function(e){var t="";return this.props.answers[e.cde]&&(t=this.props.answers[e.cde]),l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement("h6",null,e.survey_question_instruction),l.createElement("h4",null,e.title),l.createElement("h6",null,e.instructions)),l.createElement(E.a,null,l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(w.a,{type:"text",name:e.cde,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,value:t}))))}},{key:"render",value:function(){var e=this,t=this.props.questions[this.props.stage],n=0;t.spec&&"integer"===t.spec.tag&&(void 0!==this.props.answers[t.cde]?n=this.props.answers[t.cde]:this.onSliderChange(n));this.props.questions.length,this.props.stage;var r,s="PROMSConsent"===t.cde,a=l.createElement("div",null,"By ticking this box you:",l.createElement("ul",null,l.createElement("li",null,"Give consent for the information you provide to be used for the CIC Cancer project; and "),l.createElement("li",null,"Will receive a reminder when the next survey is due."))),i=t.spec&&"range"===t.spec.tag&&t.spec.allow_multiple;return"cond"===t.tag&&null==t.spec||"string"===t.datatype?this.renderInput(t):i?this.renderMultiSelect(t):("EQ_Health_Rate"===t.cde?(r=this.transformSubstring(this.props.questions[this.props.stage].instructions,["best","worst"],"underline"),r=this.transformSubstring(r,[],"bullet")):r=this.props.questions[this.props.stage].instructions,l.createElement(b.a,null,l.createElement(E.a,{tag:"fieldset"},l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement("h6",null,this.props.questions[this.props.stage].survey_question_instruction),l.createElement("h4",null,this.props.questions[this.props.stage].title),l.createElement("h6",null,r))),"integer"===t.spec.tag?l.createElement("div",{className:"row"},l.createElement("div",{className:"col"},l.createElement("div",{className:"float-right",style:{width:"100px",height:"100px",backgroundColor:"#666",marginTop:"20vh",paddingTop:"3px",borderRadius:"8px"}},l.createElement("p",{className:"text-center",style:{color:"white",align:"center"}},l.createElement("p",null,"YOUR HEALTH TODAY ",l.createElement("br",null)," ",l.createElement("b",null,n))))),l.createElement("div",{className:"col",style:{width:"50%",height:"50vh",margin:"0 auto",leftPadding:"100px"}},l.createElement(f.b,{vertical:!0,min:t.spec.min,max:t.spec.max,defaultValue:n,marks:this.getMarks(t),handle:this.getSliderHandle(),onChange:this.onSliderChange}))):s?l.createElement(E.a,{check:!0},l.createElement(O.a,{check:!0},l.createElement(w.a,{type:"checkbox",name:this.props.questions[this.props.stage].cde,onChange:this.handleConsent,checked:this.props.answers[t.cde]}),a)):g.map("range"===t.spec.tag?t.spec.options:[],(function(n,r){return l.createElement(E.a,{check:!0},l.createElement(y.a,{sm:"12",md:{size:6,offset:3}},l.createElement(O.a,{check:!0},l.createElement(w.a,{type:"radio",name:e.props.questions[e.props.stage].cde,value:n.code,onChange:e.handleChange,checked:n.code===e.props.answers[t.cde]}),n.text)))}))))}}]),t}(l.Component);var k=Object(u.b)((function(e){return{questions:e.questions,stage:e.stage,answers:e.answers}}),(function(e){return{enterData:function(t,n){return e(j.a({cde:t,value:n}))}}}))(x),C=n(52),S=n(63),_=n(209),q=n(208),P=n(210),N=n(211),M=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,e))).moveNext=n.moveNext.bind(Object(o.a)(n)),n.movePrevious=n.movePrevious.bind(Object(o.a)(n)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"atEnd",value:function(){var e=this.props.questions.length-1;return this.props.stage===e}},{key:"atBeginning",value:function(){return 0===this.props.stage}},{key:"getProgress",value:function(){var e=this.props.questions.length,t=this.props.questions[e-1].cde,n=Object.keys(this.props.answers).filter((function(e){return e!==t})).length;return e-=1,Math.floor(n/e*100)}},{key:"movePrevious",value:function(){this.atBeginning()||this.props.goPrevious()}},{key:"moveNext",value:function(){this.atEnd()||this.props.goNext()}},{key:"render",value:function(){var e,t,n,r,s;return this.atEnd()?C.isMobile?n=l.createElement("div",{className:"text-center"},l.createElement(q.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=l.createElement(y.a,{sm:{size:4,order:2,offset:1}},l.createElement(q.a,{onClick:this.props.submitAnswers,color:"success",size:"sm"},"Submit Answers")):e=C.isMobile?l.createElement("i",{onClick:this.moveNext}," ",l.createElement(S.b,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex",justifyContent:"flex-end"}},l.createElement(q.a,{onClick:this.moveNext,size:"sm",color:"info",style:{minWidth:"90px"}},"Next")),t=this.atBeginning()?C.isMobile?l.createElement("i",{onClick:this.movePrevious}," ",l.createElement(S.a,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex"}},l.createElement(q.a,{onClick:this.movePrevious,color:"info",size:"sm",disabled:!0,style:{minWidth:"90px"}},"Previous")):C.isMobile?l.createElement("i",{onClick:this.movePrevious}," ",l.createElement(S.a,{style:{fontSize:"56px"}})," "):l.createElement(y.a,{sm:{size:2},style:{display:"flex"}},l.createElement(q.a,{onClick:this.movePrevious,color:"info",size:"sm",style:{minWidth:"90px"}},"Previous")),this.atEnd()||(r=l.createElement(y.a,{sm:{size:8}},l.createElement(_.a,{color:"info",value:this.getProgress()},this.getProgress(),"%"))),this.props.questions[this.props.stage].source&&(s=l.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}}," Source:",this.props.questions[this.props.stage].source)),l.createElement("div",{className:"App",style:{height:"100%"}},l.createElement(P.a,null,l.createElement("div",{className:"mb-4"},l.createElement(N.a,null,l.createElement(y.a,null,l.createElement(m,{stage:this.props.stage}))),l.createElement(N.a,null,l.createElement(y.a,null,l.createElement(k,{title:this.props.title,stage:this.props.stage,questions:this.props.questions})))),l.createElement("div",{className:"mb-4"},l.createElement(N.a,{className:"navigationinputs"},t,r,e)),n),l.createElement("footer",{className:"footer",style:{height:"auto"}},s,l.createElement("div",{className:"text-center text-muted",style:{fontSize:"12px"}},this.props.questions[this.props.stage].copyright_text)))}}]),t}(l.Component);t.a=Object(u.b)((function(e){return{stage:e.stage,title:e.title,answers:e.answers,questions:e.questions}}),(function(e){return Object(p.b)({goNext:j.b,goPrevious:j.c,submitAnswers:j.e},e)}))(M)},117:function(e,t,n){e.exports=n(118)},118:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"store",(function(){return d}));var r=n(1),s=n.n(r),a=n(5),i=n.n(a),o=n(115),c=(n(200),n(112)),l=n(42),u=n(25),p=n(113),m=n(27),h=(n(201),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c),d=Object(u.d)(m.d,h(Object(u.a)(p.a)));d.subscribe((function(){return e.console.log(d.getState())}));i.a.render(s.a.createElement(l.a,{store:d},s.a.createElement(o.a,null)),document.getElementById("root")),c.a()}.call(this,n(32))},200:function(e,t,n){},27:function(e,t,n){"use strict";var r,s=n(13),a=n(62),i=n.n(a),o=n(213),c=n(212);function l(e,t){return e.filter((function(e){return function(e,t){switch(e.tag){case"cde":return!0;case"cond":return function(e,t){if(!t.answers.hasOwnProperty(e.cde))return!1;var n=t.answers[e.cde];switch(e.op){case"=":return n===e.value;case"or":return e.value.indexOf(n)>-1;default:return!1}}(e.cond,t);default:return!1}}(e,t)}))}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return y}));var m=Object(o.a)("PROMS_PREVIOUS"),h=Object(o.a)("PROMS_NEXT"),d=Object(o.a)("PROMS_SUBMIT"),g=Object(o.a)("PROMS_ENTER_DATA");i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.xsrfCookieName="csrftoken";var f={stage:0,answers:{},questions:l(window.proms_config.questions,{answers:{}}),title:""};function v(e,t){var n=e.payload.cde,r=e.payload.value,s=p({},t.answers);return s[n]=r,s}function b(e){var t=e.stage,n=e.questions[t].cde,r=p({},e.answers);return delete r[n],r}function E(e){var t=e.questions.length,n=e.answers,r=e.questions[t-1].cde;if(!n.hasOwnProperty(r)){var s=p({},e.answers);return s[r]=!1,s}return n}var y=Object(c.a)((r={},Object(s.a)(r,m,(function(e,t){return p({},e,{answers:b(e),stage:e.stage-1})})),Object(s.a)(r,h,(function(e,t){return p({},e,{stage:e.stage+1})})),Object(s.a)(r,d,(function(e,t){var n=p({},e,{answers:E(e)});return function(e){var t=window.proms_config.patient_token,n=window.proms_config.registry_code,r=window.proms_config.survey_name,s=window.proms_config.survey_endpoint,a={patient_token:t,registry_code:n,survey_name:r,answers:e};i.a.post(s,a).then((function(e){return window.location.replace(window.proms_config.completed_page)})).catch((function(e){return alert(e.toString())}))}(n.answers),n})),Object(s.a)(r,g,(function(e,t){var n=v(t,e);return p({},e,{answers:v(t,e),questions:l(window.proms_config.questions,{answers:n})})})),r),f)}},[[117,1,2]]]);
//# sourceMappingURL=main.41e2e23c.chunk.js.map
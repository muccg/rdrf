datatest:
  extends:
    file: docker-compose-common.yml
    service: datatest

dbtest:
  extends:
    file: docker-compose-common.yml
    service: db

clinicaltest:
  extends:
    file: docker-compose-common.yml
    service: db

cachetest:
  extends:
    file: docker-compose-common.yml
    service: cache

mongotest:
  extends:
    file: docker-compose-common.yml
    service: mongo

runservertest:
  extends:
    file: docker-compose-common.yml
    service: runserver
  volumes_from:
    - datatest
  command: runserver
  environment:
    - DEPLOYMENT=test
    - ALLOWED_HOSTS=*
  links:
    - dbtest:db
    - dbclinical:clinicaldb
    - cachetest:cache
    - mongotest:mongo
  ports:
    - "18000:8000"
